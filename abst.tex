\documentclass[10.5pt, a4paper]{jsarticle}
%--------------図を挿入するための設定等々-----------
\usepackage{amsmath, amssymb}
\usepackage{bm}
\usepackage[dvipdfmx]{graphicx}
\usepackage{ascmac}
\usepackage{fancybox}
\usepackage{float}
\usepackage{url}

\usepackage{comment}

%--------------文章の縦横の位置調整-----------
\usepackage[top=15truemm, bottom=15truemm, left=15truemm, right=15truemm]{geometry}
%\setlength{\textheight}{46\baselineskip}
%\addtolength{\textheight}{\topskip}
%\setlength{\voffset}{-70pt}

%% ここまで設定 %%
\begin{document}

\twocolumn[
    \begin{center}
	    {\LARGE 3DCGモデリングにおける同期編集システムの研究 }\vspace{3mm}\\
	    {知能情報工学科 乃万研究室 13231071　古城戸　隆志\hspace{3mm}\\
                   2016 年  9月  1日 (木)}
    \end{center}
    \vspace{7mm}
]

\pagestyle{empty} % ページ番号をつけない.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%　表や図の名前を与える \caption 命令はコロンが入ってしまう．
%　以下の命令でコロンが入らないようにする．
\makeatletter
\long\def\@makecaption#1#2{%
\vskip\abovecaptionskip%
\sbox\@tempboxa{#1\hspace{1zw}#2}
\ifdim \wd\@tempboxa >\hsize%

#1 #2\par
\else
\global \@minipagefalse
\hb@xt@\hsize{\hfil\box\@tempboxa\hfil}%
\fi
\vskip\belowcaptionskip}
\makeatother

\makeatletter
\def\section{\@startsection {section}{1}{\z@}{0ex plus 0ex minus 0ex}{0ex plus 0ex}{\Large\bf}}
\makeatother

\makeatletter
\def\subsection{\@startsection {subsection}{1}{\z@}{0ex plus 0ex minus 0ex}{0ex plus 0ex}{\normalsize\bf}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\noindent


%% 本文 %%
\section{背景}
近年, Google DocumentやMicrosoft Word Onlineに代表される同期編集システムがある.
同期編集に関する研究は多数行われており, その一つとしてWebページをブラウザから直接編集するシステムWFEの研究がある\cite{WFE}.
WFEでは複数クライアントで編集結果を表示しながら, Webページの同期編集を可能としている.
しかしWFEでは, あるクライアントが送信したデータが全クライアントに同期されるまでの同期誤差が発生する.
同期誤差が大きくなるにつれてクライアント間の編集が衝突し, 編集内容を喪失してしまう問題がある.
この同期誤差を短縮するためにWFE-Sによる差分同期の方法が提案されている\cite{WFE-S}.\par
本研究では, この差分同期の方法を3Dモデリングにおける3次元データに適用する.
従来のテキストデータより構造が複雑な3次元データを扱う場合, 衝突回避処理やデータ管理において3次元データならではの同期編集システムが必要である.

\section{目的}
本研究では, 3Dモデリングにおける3次元データならではの編集内容の衝突やデータ管理を考慮した同期編集システムを提案する.
これにより, 3Dモデリングにおいて複数人で頂点データを共有し同期編集が可能となる機能の実装を目指す.

\section{システム}
本システムは, ユーザによる頂点編集が可能なクライアントと, 頂点編集のデータを管理するサーバプログラムによって構成されるモデリングソフトである.
また, 複数クライアントでの編集結果の衝突回避には, 頂点編集の差分データを用いる.
処理の流れは, まずクライアントが頂点編集のデータをサーバに送信すると, サーバは衝突回避処理を行い, 差分データとしてデータを管理をする.
また, クライアントは一定時間ごとにデータをサーバから受信し適用する.
これらの手順によりクライアント間でデータの同期をする.

\subsection{データの送信}
ユーザは従来のモデリングソフトと同様に頂点編集し, 3Dモデルを作成する.
クライアントは, ユーザが選択した頂点, 操作内容, クライアント識別子といった頂点編集のデータをサーバに送信する.
また, 新規のクライアントはクライアント識別子をサーバに送信し接続要求をする.

\subsection{衝突回避処理}
同期誤差が発生している状態でクライアントが頂点編集のデータを送信する場合に, 編集内容の衝突が起こる可能性がある.
サーバは, 衝突の可能性がある頂点編集のデータに対して衝突回避処理をする.
ユーザが編集している頂点に対して, その頂点が含まれる面を頂点編集の範囲とする.
衝突回避処理は, 頂点編集の範囲が他のクライアントと重なっている場合, サーバが後に受け取ったデータを採用し, 採用されなかった頂点編集のデータを無効にする.

\subsection{差分データの管理}
サーバは, 衝突回避処理後採用されたデータを, 差分データとしてデータベースに登録する.
また, 新規のクライアントを検出した時と一定時間ごとに, すべての差分データを処理しスナップショットを作成する.
スナップショットは, クライアントで実装されている3Dオブジェクトの内部表現とフォーマットを統一し, すべての3Dオブジェクトの頂点データや位置データで構成される.
スナップショットの作成に利用した差分データは, スナップショットの作成後に削除する.

\subsection{データの受信}
クライアントが, 一定時間ごとにサーバへデータの受信要求をすると, サーバは最新のスナップショットとそれ以降の差分データをクライアントに送信する.
データを受信したクライアントは, クライアントに保存されている3Dオブジェクトの頂点データや位置データを, 受信したスナップショットのデータに置き換える.
その後, 受信した差分データを, 古い方から順に適用することでデータの同期を完了する.

\section{進捗と今後の方針}
現在, WebGLのライブラリであるThree.jsを用いて, 基本的なカメラの制御とモデルのビューアを実装した.
また, 簡易的な頂点編集機能を持ったクライアントを開発した.
今後は, クライアントとサーバのデータの送受信の部分を実装していく.
さらに, サーバの衝突回避処理とデータベースによる差分データの管理部分を実装することでシステムの完成を目指す.

%%　参考文献　%%

\begin{thebibliography}{9}
\bibitem{WFE}
田代慎治ら, ``WFEにおける協調的なWebページの編集について,'' 第67回情報処理学会全国大会論文集, 2005.
\bibitem{WFE-S}
合田拓史ら, ``既存Webページ同期編集システムWFE-Sにおける差分同期機構の試作,'' 第11回情報科学技術フォーラム, 2012.
\end{thebibliography}

\end{document}
